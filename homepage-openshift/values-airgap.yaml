# Air-Gapped / Disconnected Environment Values
# Use this values file for deployments with no internet access

replicaCount: 1

image:
  registry: registry.internal.local  # CHANGE TO YOUR INTERNAL REGISTRY
  repository: homepage
  pullPolicy: IfNotPresent
  tag: "latest"

# Image pull secret for internal registry (uncomment if required)
imagePullSecrets: []
# imagePullSecrets:
#   - name: internal-registry-secret

extraEnv:
  - name: HOMEPAGE_ALLOWED_HOSTS
    value: "*"

config:
  allowedHosts: []
  
  services: |
    ---
    - Services:
        - VLAN Manager:
            href: http://vlan-manager.internal.local:8000
            description: Network VLAN management tool
            icon: mdi-network
        
        - Cluster Navigator:
            href: http://navigator.internal.local:8001
            description: OpenShift cluster navigation tool
            icon: mdi-compass-outline
        
        - GitLab Project:
            href: https://gitlab.internal.local/your-team/project
            description: Specific project repository
            icon: mdi-git
        
        - ArgoCD Main:
            href: https://argocd.internal.local
            description: Primary GitOps deployment instance
            icon: mdi-ship-wheel

    - Developer Tools:
        - Confluence:
            href: https://confluence.internal.local
            description: Team documentation and knowledge base
            icon: mdi-book-open-page-variant
        
        - GitLab Team:
            href: https://gitlab.internal.local/groups/your-team
            description: Team group repositories
            icon: mdi-gitlab

    - ArgoCD Instances:
        - ArgoCD Dev:
            href: https://argocd-dev.internal.local
            description: Development environment deployments
            icon: mdi-ship-wheel
        
        - ArgoCD Staging:
            href: https://argocd-staging.internal.local
            description: Staging environment deployments
            icon: mdi-ship-wheel
        
        - ArgoCD Production:
            href: https://argocd-prod.internal.local
            description: Production environment deployments
            icon: mdi-ship-wheel

  settings: |
    ---
    title: Team Services Dashboard - Air-Gapped
    # No external favicon for air-gapped environment
    theme: dark
    color: slate
    background: 
      image: /backgrounds/v4-background-dark.jpg
      blur: sx
      saturate: 50
      brightness: 50
      opacity: 20
    layout:
      Services:
        style: row
        columns: 4
        equalHeight: true
      Developer Tools:
        style: row
        columns: 4
        equalHeight: true
      ArgoCD Instances:
        style: row
        columns: 4
        equalHeight: true
    headerStyle: underlined
    cardBlur: md
    hideVersion: true

  widgets: |
    ---
    - resources:
        backend: resources
        expanded: true
        cpu: true
        memory: true
    
    # Note: Search widget may not work in fully air-gapped environments
    - search:
        provider: google
        target: _blank
        
    - datetime:
        text_size: xl
        format:
          timeStyle: short
          dateStyle: short

  bookmarks: |
    ---
    - Internal Tools:
        - Internal GitLab:
            - icon: mdi-gitlab
              href: https://gitlab.internal.local
        - Internal Registry:
            - icon: mdi-docker
              href: https://registry.internal.local
        - Documentation:
            - icon: mdi-book-open-page-variant
              href: https://docs.internal.local
              
    - DevOps:
        - OpenShift Console:
            - icon: mdi-kubernetes
              href: https://console.openshift.local
        - ArgoCD:
            - icon: mdi-ship-wheel
              href: https://argocd.internal.local
        - Nexus/Artifactory:
            - icon: mdi-package-variant
              href: https://nexus.internal.local
              
    - Monitoring:
        - Grafana:
            - icon: mdi-chart-line
              href: https://grafana.internal.local
        - Prometheus:
            - icon: mdi-fire
              href: https://prometheus.internal.local

serviceAccount:
  create: true
  automount: true
  annotations: {}
  name: ""

podAnnotations: {}
podLabels: {}

# OpenShift compatible security contexts (no fixed UIDs)
podSecurityContext: {}

securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: false
  runAsNonRoot: true
  privileged: false
  seccompProfile:
    type: RuntimeDefault

service:
  type: ClusterIP
  port: 80

# Disable ingress, use OpenShift Routes
ingress:
  enabled: false

# OpenShift Route configuration
route:
  enabled: true
  host: "homepage.apps.internal.local"  # CHANGE TO YOUR INTERNAL DOMAIN
  annotations: {}
  tls:
    enabled: true
    termination: edge
    insecureEdgeTerminationPolicy: Redirect

rbac:
  enabled: true

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

# Air-gapped volume configuration
volumes:
  - name: config
    configMap:
      name: "{{ include \"homepage.fullname\" . }}-config"
  # Background images via ConfigMap (recommended for air-gapped)
  - name: backgrounds
    configMap:
      name: homepage-backgrounds
  # Alternative: Use emptyDir if no custom backgrounds needed
  # - name: backgrounds
  #   emptyDir: {}

volumeMounts:
  - name: config
    mountPath: "/app/config"
    readOnly: true
  - name: backgrounds
    mountPath: "/app/public/backgrounds"
    readOnly: true

nodeSelector: {}
tolerations: []
affinity: {}