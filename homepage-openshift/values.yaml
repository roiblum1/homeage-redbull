# Air-Gapped Homepage Configuration with ArgoCD Apps + GitLab Group Repo Count

replicaCount: 1

image:
  registry: registry.internal.local          # CHANGE TO YOUR INTERNAL REGISTRY
  repository: homepage
  pullPolicy: IfNotPresent
  tag: "latest"

imagePullSecrets: []
# imagePullSecrets:
#   - name: internal-registry-secret

extraEnv:
  # Allow reverse-proxy/Route hostnames (you can tighten later)
  - name: HOMEPAGE_ALLOWED_HOSTS
    value: "*"

  # Skip TLS certificate verification (for self-signed certs or HTTP-only)
  # IMPORTANT: All services configured to use HTTP by default
  # Keep this enabled for environments with self-signed HTTPS certificates
  - name: NODE_TLS_REJECT_UNAUTHORIZED
    value: "0"

  # Tokens are injected via env var placeholders in YAML:
  # - {{HOMEPAGE_VAR_ARGOCD_TOKEN}}
  # - {{HOMEPAGE_VAR_GITLAB_TOKEN}}
  #
  # Create a Secret named "homepage-secrets" with these keys:
  # - argocd-token
  # - gitlab-token
  - name: HOMEPAGE_VAR_ARGOCD_TOKEN
    valueFrom:
      secretKeyRef:
        name: homepage-secrets
        key: argocd-token
        optional: true  # Set to false in production
  - name: HOMEPAGE_VAR_GITLAB_TOKEN
    valueFrom:
      secretKeyRef:
        name: homepage-secrets
        key: gitlab-token
        optional: true  # Set to false in production

config:
  allowedHosts: []

  services: |
    ---
    - Core GitOps:
        - GitLab GitOps Project:
            href: http://gitlab.internal.local/your-team/gitops
            description: Main GitOps repository
            icon: mdi-gitlab
            ping: http://gitlab.internal.local
            statusStyle: dot

        - ArgoCD Main:
            href: http://argocd.internal.local
            description: Main Argo CD instance (tracks the GitOps repo)
            icon: mdi-ship-wheel
            ping: http://argocd.internal.local
            statusStyle: dot
            widget:
              type: argocd
              url:  http://argocd.internal.local
              username: "{{HOMEPAGE_VAR_ARGOCD_TOKEN}}"
              refreshInterval: 30000
              # fields: ["apps", "healthy", "outOfSync", "degraded"]

    - DevOps:
        - GitLab Team Group:
            href: http://gitlab.internal.local/groups/your-team
            description: Team group (repo count)
            icon: mdi-gitlab
            ping: http://gitlab.internal.local
            statusStyle: dot
            widget:
              type: customapi
              # IMPORTANT:
              # If the group is nested, URL-encode the slash: e.g. platform%2Fyour-team
              url: "http://gitlab.internal.local/api/v4/groups/your-team/projects?per_page=100"
              method: GET
              headers:
                PRIVATE-TOKEN: "{{HOMEPAGE_VAR_GITLAB_TOKEN}}"
              mappings:
                - label: Repos
                  format: size
              refreshInterval: 60000

        - Confluence:
            href: http://confluence.internal.local
            description: Team documentation
            icon: mdi-book-open-page-variant
            ping: http://confluence.internal.local
            statusStyle: dot

        - Grafana Dashboard:
            href: http://grafana.internal.local/d/XXXX/main-dashboard
            description: Main operational dashboard
            icon: mdi-chart-line
            ping: http://grafana.internal.local
            statusStyle: dot

    - Internal Tools:
        - VLAN Manager:
            href: http://vlan-manager.internal.local:8000
            description: Network VLAN management tool
            icon: mdi-network
            ping: http://vlan-manager.internal.local:8000
            statusStyle: dot

        - Cluster Navigator:
            href: http://navigator.internal.local:8001
            description: OpenShift cluster navigation tool
            icon: mdi-compass-outline
            ping: http://navigator.internal.local:8001
            statusStyle: dot

    - Management Clusters:
        - mgmt-01 Console:
            href: http://console-mgmt01.apps.internal.local
            description: OpenShift console
            icon: mdi-kubernetes
            ping: http://console-mgmt01.apps.internal.local
            statusStyle: dot

        - mgmt-01 Argo:
            href: http://argocd-mgmt01.apps.internal.local
            description: Cluster-local Argo instance
            icon: mdi-ship-wheel
            ping: http://argocd-mgmt01.apps.internal.local
            statusStyle: dot

        - mgmt-02 Console:
            href: http://console-mgmt02.apps.internal.local
            description: OpenShift console
            icon: mdi-kubernetes
            ping: http://console-mgmt02.apps.internal.local
            statusStyle: dot

        - mgmt-02 Argo:
            href: http://argocd-mgmt02.apps.internal.local
            description: Cluster-local Argo instance
            icon: mdi-ship-wheel
            ping: http://argocd-mgmt02.apps.internal.local
            statusStyle: dot

        - mgmt-03 Console:
            href: http://console-mgmt03.apps.internal.local
            description: OpenShift console
            icon: mdi-kubernetes
            ping: http://console-mgmt03.apps.internal.local
            statusStyle: dot

        - mgmt-03 Argo:
            href: http://argocd-mgmt03.apps.internal.local
            description: Cluster-local Argo instance
            icon: mdi-ship-wheel
            ping: http://argocd-mgmt03.apps.internal.local
            statusStyle: dot

        - mgmt-04 Console:
            href: http://console-mgmt04.apps.internal.local
            description: OpenShift console
            icon: mdi-kubernetes
            ping: http://console-mgmt04.apps.internal.local
            statusStyle: dot

        - mgmt-04 Argo:
            href: http://argocd-mgmt04.apps.internal.local
            description: Cluster-local Argo instance
            icon: mdi-ship-wheel
            ping: http://argocd-mgmt04.apps.internal.local
            statusStyle: dot

        - mgmt-05 Console:
            href: http://console-mgmt05.apps.internal.local
            description: OpenShift console
            icon: mdi-kubernetes
            ping: http://console-mgmt05.apps.internal.local
            statusStyle: dot

        - mgmt-05 Argo:
            href: http://argocd-mgmt05.apps.internal.local
            description: Cluster-local Argo instance
            icon: mdi-ship-wheel
            ping: http://argocd-mgmt05.apps.internal.local
            statusStyle: dot

        - mgmt-06 Console:
            href: http://console-mgmt06.apps.internal.local
            description: OpenShift console
            icon: mdi-kubernetes
            ping: http://console-mgmt06.apps.internal.local
            statusStyle: dot

        - mgmt-06 Argo:
            href: http://argocd-mgmt06.apps.internal.local
            description: Cluster-local Argo instance
            icon: mdi-ship-wheel
            ping: http://argocd-mgmt06.apps.internal.local
            statusStyle: dot

    - DC Systems:
        - Cisco UCS:
            href: http://ucs.internal.local
            description: UCS Manager
            icon: mdi-server
            ping: http://ucs.internal.local
            statusStyle: dot

        - NetBox:
            href: http://netbox.internal.local
            description: IPAM / DCIM
            icon: mdi-ip-network
            ping: http://netbox.internal.local
            statusStyle: dot

        - OpenManage:
            href: http://openmanage.internal.local
            description: Dell OpenManage
            icon: mdi-server-network
            ping: http://openmanage.internal.local
            statusStyle: dot

        - OneView:
            href: http://oneview.internal.local
            description: HPE OneView
            icon: mdi-server-network
            ping: http://oneview.internal.local
            statusStyle: dot

  settings: |
    ---
    title: Team Hub
    theme: dark
    color: slate

    headerStyle: underlined
    hideVersion: true
    useEqualHeights: true
    lazyLoad: true
    statusStyle: dot

    background:
      image: /backgrounds/v4-background-dark.jpg
      blur: sm
      saturate: 60
      brightness: 70
      opacity: 35

    layout:
      Core GitOps:
        style: row
        columns: 2
      DevOps:
        style: row
        columns: 3
      Internal Tools:
        style: row
        columns: 3
      Management Clusters:
        style: row
        columns: 4
      DC Systems:
        style: row
        columns: 4

  widgets: |
    ---
    - resources:
        backend: resources
        expanded: true
        cpu: true
        memory: true

    - datetime:
        text_size: xl
        format:
          timeStyle: short
          dateStyle: short

    # Optional: Add search if needed
    # - search:
    #     provider: google
    #     target: _blank

  bookmarks: |
    ---
    - Quick Links:
        - GitLab:
            - icon: mdi-gitlab
              href: https://gitlab.internal.local
        - ArgoCD Main:
            - icon: mdi-ship-wheel
              href: https://argocd.internal.local
        - Confluence:
            - icon: mdi-book-open-page-variant
              href: https://confluence.internal.local
        - Grafana:
            - icon: mdi-chart-line
              href: https://grafana.internal.local

serviceAccount:
  create: true
  automount: true
  annotations: {}
  name: ""

podAnnotations: {}
podLabels: {}

podSecurityContext: {}

securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop: [ "ALL" ]
  readOnlyRootFilesystem: false
  runAsNonRoot: true
  privileged: false
  seccompProfile:
    type: RuntimeDefault

service:
  type: ClusterIP
  port: 80

ingress:
  enabled: false

route:
  enabled: true
  host: "homepage.apps.internal.local"     # CHANGE TO YOUR INTERNAL DOMAIN
  annotations: {}
  tls:
    enabled: true
    termination: edge
    insecureEdgeTerminationPolicy: Redirect

rbac:
  enabled: true

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

volumes:
  - name: config
    configMap:
      name: "{{ include \"homepage.fullname\" . }}-config"

  - name: backgrounds
    configMap:
      name: homepage-backgrounds

volumeMounts:
  - name: config
    mountPath: "/app/config"
    readOnly: true

  - name: backgrounds
    mountPath: "/app/public/backgrounds"
    readOnly: true

nodeSelector: {}
tolerations: []
affinity: {}