# Homepage Baked Image Deployment - Air-Gapped Ready
# All configuration is baked into the custom image
# No ConfigMaps, no complexity - just deploy the image

replicaCount: 1

image:
  registry: registry.internal.local
  repository: homepage-redbull
  pullPolicy: IfNotPresent
  tag: "latest"

imagePullSecrets: []
# Uncomment if using private registry
# imagePullSecrets:
#   - name: internal-registry-secret

# Environment variables
env:
  # Allow all hostnames (for OpenShift Routes)
  - name: HOMEPAGE_ALLOWED_HOSTS
    value: "*"

  # Skip TLS verification (for self-signed certs)
  - name: NODE_TLS_REJECT_UNAUTHORIZED
    value: "0"

  # ArgoCD API Token (from secret)
  - name: HOMEPAGE_VAR_ARGOCD_TOKEN
    valueFrom:
      secretKeyRef:
        name: homepage-secrets
        key: argocd-token
        optional: true

  # GitLab API Token (from secret)
  - name: HOMEPAGE_VAR_GITLAB_TOKEN
    valueFrom:
      secretKeyRef:
        name: homepage-secrets
        key: gitlab-token
        optional: true

# Service configuration
service:
  type: ClusterIP
  port: 3000

# OpenShift Route
route:
  enabled: true
  host: ""  # Auto-generated: homepage-<namespace>.apps.<cluster-domain>
  tls:
    enabled: true
    termination: edge
    insecureEdgeTerminationPolicy: Redirect

# Ingress (disabled - use Route on OpenShift)
ingress:
  enabled: false

# Resource limits
resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

# Security context
podSecurityContext:
  runAsNonRoot: true
  seccompProfile:
    type: RuntimeDefault

securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  privileged: false
  readOnlyRootFilesystem: false
  runAsNonRoot: true
  runAsUser: 1000
  runAsGroup: 1000
  seccompProfile:
    type: RuntimeDefault

# Service Account
serviceAccount:
  create: true
  name: ""

# Node selection
nodeSelector: {}
tolerations: []
affinity: {}

# Pod annotations (optional)
podAnnotations: {}

# Pod labels (optional)
podLabels: {}
